!function(e){var o={};function a(i){if(o[i])return o[i].exports;var t=o[i]={i:i,l:!1,exports:{}};return e[i].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=o,a.d=function(e,o,i){a.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:i})},a.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(o,"a",o),o},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},a.p="",a(a.s=9)}({10:function(e,o,a){jQuery(function(e){Promise.resolve().then(function(){return a(11)}).then(function(o){var a=o.WooVariationGalleryAdmin;a.GWPAdmin(),e("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){a.ImageUploader(),a.Sortable()}),e("#variable_product_options").on("woocommerce_variations_added",function(){a.ImageUploader(),a.Sortable()})})})},11:function(e,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),a.d(o,"WooVariationGalleryAdmin",function(){return n});var i=function(){function e(e,o){for(var a=0;a<o.length;a++){var i=o[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(o,a,i){return a&&e(o.prototype,a),i&&e(o,i),o}}();var t,n=(t=jQuery,function(){function e(){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"GWPAdmin",value:function(){t().gwp_live_feed&&t().gwp_live_feed(),t().gwp_deactivate_popup&&t().gwp_deactivate_popup("woo-variation-gallery")}},{key:"ImageUploader",value:function(){t(document).off("click",".add-woo-variation-gallery-image"),t(document).on("click",".add-woo-variation-gallery-image",this.AddImage),t(document).on("click",".remove-woo-variation-gallery-image",this.RemoveImage),t(".woocommerce_variation").each(function(){var e=t(this).find(".options:first");t(this).find(".woo-variation-gallery-wrapper").insertBefore(e)})}},{key:"AddImage",value:function(o){var a=this;o.preventDefault(),o.stopPropagation();var i=void 0,n=t(this).data("product_variation_id");if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(i)return void i.open();(i=wp.media.frames.select_image=wp.media({title:woo_variation_gallery_admin.choose_image,button:{text:woo_variation_gallery_admin.add_image},library:{type:["image"]}})).on("select",function(){var o=i.state().get("selection").toJSON().map(function(e){if("image"===e.type){var o=e.id,a=e.sizes,i=(a=void 0===a?{}:a).thumbnail,t=a.full,r=i?i.url:t.url;return wp.template("woo-variation-gallery-image")({id:o,url:r,product_variation_id:n})}}).join("");t(a).parent().prev().find(".woo-variation-gallery-images").append(o),e.Sortable(),e.VariationChanged(a),_.delay(function(){e.ProNotice(a)},5)}),i.open()}}},{key:"VariationChanged",value:function(e){t(e).closest(".woocommerce_variation").addClass("variation-needs-update"),t("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),t("#variable_product_options").trigger("woocommerce_variations_input_changed")}},{key:"ProNotice",value:function(e){t(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-images > li").length,t(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-images > li").each(function(o,a){o>=2?(t(a).remove(),t(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-pro-button").show()):t(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-pro-button").hide()})}},{key:"RemoveImage",value:function(o){var a=this;o.preventDefault(),o.stopPropagation(),e.VariationChanged(this),_.delay(function(){e.ProNotice(a),t(a).parent().remove()},1)}},{key:"Sortable",value:function(){t(".woo-variation-gallery-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"woo-variation-gallery-sortable-placeholder",start:function(e,o){o.item.css("background-color","#f6f6f6")},stop:function(e,o){o.item.removeAttr("style")},update:function(){e.VariationChanged(this)}})}}]),e}())},9:function(e,o,a){e.exports=a(10)}});